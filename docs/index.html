<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Cours 5TC -- INSA Lyon -- Systèmes embarqués pour le traitement du signal audio en temps-réel">
        
        <link rel="canonical" href="https://embaudio.grame.fr/">
        <link rel="shortcut icon" href="img/favicon.ico">
        <title>AUD @ INSA Lyon</title>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/docco.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body class="homepage">
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href=".">AUD @ INSA Lyon</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem active">
                                <a href="." class="nav-link">Syllabus</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Lectures <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="lectures/lecture1/" class="dropdown-item"> 1: Course Introduction and Programming Environment Setup </a>
</li>
                                    
<li>
    <a href="lectures/lecture2/" class="dropdown-item"> 2: Audio Signal Processing Fundamentals </a>
</li>
                                    
<li>
    <a href="lectures/lecture3/" class="dropdown-item"> 3: Digital Audio Systems Architectures and Audio Callback </a>
</li>
                                    
<li>
    <a href="lectures/lecture4/" class="dropdown-item"> 4: Hardware Control and Audio Codec Configuration </a>
</li>
                                    
<li>
    <a href="lectures/lecture5/" class="dropdown-item"> 5: Audio Processing Basics I </a>
</li>
                                    
<li>
    <a href="lectures/lecture6/" class="dropdown-item"> 6: Audio Processing Basics II </a>
</li>
                                    
<li>
    <a href="lectures/lecture9/" class="dropdown-item"> 8: Embedded System Peripherals </a>
</li>
                                    
<li>
    <a href="lectures/lecture10/" class="dropdown-item"> 10: Embedded OS, FreeRTOS, Embedded Linux Devices </a>
</li>
                                    
<li>
    <a href="lectures/lecture11/" class="dropdown-item"> 12: Faust on the Teensy and Advanced Control </a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" class="nav-link disabled">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="lectures/lecture1/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#embedded-audio-signal-processing" class="nav-link">Embedded Audio Signal Processing</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#instructors" class="nav-link">Instructors</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#organization-and-ects" class="nav-link">Organization and ECTS</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#course-overview" class="nav-link">Course Overview</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="embedded-audio-signal-processing">Embedded Audio Signal Processing</h1>
<p>This course is a collaboration between <a href="https://www.insa-lyon.fr/en/">Insa-Lyon</a> (TC-Dept, <a href="http://www.citi-lab.fr/">Citi Lab</a>), <a href="https://www.inria.fr/fr">INRIA</a>, and <a href="http://www.grame.fr">GRAME-CNCM</a>. The objective is to foster the development of emerging embedded audio devices and to take advantage of the resources of the CITI/INRIA Emeraude Team (Embedded Programmable Audio Systems) in this domain.</p>
<p>In this course, students will learn about:</p>
<ul>
<li>Low-level embedded systems for real-time audio signal processing</li>
<li>Digital audio system architecture</li>
<li>Audio codec configuration</li>
<li>IC communication protocols</li>
<li>Audio signal processing</li>
<li>Audio sound synthesis and effects design </li>
<li>The Faust programming language</li>
</ul>
<h2 id="instructors">Instructors</h2>
<ul>
<li><a href="https://ccrma.stanford.edu/~rmichon">Romain Michon</a> (INRIA)</li>
<li><a href="http://perso.citi.insa-lyon.fr/trisset/">Tanguy Risset</a> (INSA Lyon)</li>
<li>Yann Orlarey (GRAME-CNCM)</li>
</ul>
<h2 id="organization-and-ects">Organization and ECTS</h2>
<p>The course will consists of 32 hours (2 ECTS) divided into 16h TD (or CM, this is equivalent) and 16h TP (two instructors):</p>
<ul>
<li>2x2h CM</li>
<li>6x2h CM/TD</li>
<li>8x2h TP</li>
<li>Evaluation on TPs</li>
</ul>
<h2 id="course-overview">Course Overview</h2>
<ul>
<li><strong>Lecture 1: <a href="lectures/lecture1/">Course Introduction and Programming Environment Setup</a></strong> -- <em>19/09/2023 14h00-16h00</em></li>
<li><strong>Lecture 2: <a href="lectures/lecture2/">Audio Signal Processing Fundamentals</a></strong> -- <em>26/09/2023 14h00-16h00</em></li>
<li><strong>Lecture 3: <a href="lectures/lecture3/">Digital Audio Systems Architectures and Audio Callback</a></strong> -- <em>03/10/2023 14h00-16h00</em></li>
<li><strong>Lecture 4: <a href="lectures/lecture4/">Hardware Control and Audio Codec Configuration</a></strong> -- <em>09/10/2023 14h00-16h00</em></li>
<li><strong>Lecture 5: <a href="lectures/lecture5/">Audio Processing Basics I</a></strong> -- <em>10/10/2023 14h00-16h00</em></li>
<li><strong>Lecture 6: <a href="lectures/lecture6/">Audio Processing Basics II</a></strong> -- <em>06/11/2023 08h00-10h00</em></li>
<li><strong>Lecture 7: Faust Tutorial</strong> -- <em>06/11/2023 10h00-12h00</em></li>
<li><strong>Lecture 8: <a href="lectures/lecture9/">Embedded System Peripherals</a></strong> -- <em>07/11/2023 14h00-16h00</em></li>
<li><strong>Lecture 9: <a href="lectures/lecture9/">Embedded OS, FreeRTOS, Embedded Linux Devices</a></strong> -- <em>08/11/2023 10h00-12h00</em></li>
<li><strong>Lecture 10: Embedded systems at <a href="https://rtone.fr/">Rtone</a></strong> -- <em>14/11/2023 14h00-16h00</em></li>
<li><strong>Lecture 11: <a href="lectures/lecture11/">Faust on the Teensy and Advanced Control</a></strong> -- <em>22/11/2023 10h00-12h00</em></li>
<li><strong>Sessions 12-16: Mini-project</strong><ul>
<li><em>29/11/2023 10h00-12h00</em></li>
<li><em>06/12/2023 10h00-12h00</em></li>
<li><em>12/12/2023 08h00-10h00</em></li>
<li><em>12/12/2023 10h00-12h00</em></li>
<li><em>19/12/2023 14h00-16h00</em></li>
</ul>
</li>
</ul>
<!--

## Final Projects

For your final project, we would like you to work in groups of 2. Pick any of the following projects up (they are ordered by level of complexity). Have fun!

### Project Idea 1: Towards Resonant Filters

The goal of this project is to implement a resonant filter that can be configured as a lowpass, bandpass, or highpass. For this, you will first need to implement a biquad filter: [https://en.wikipedia.org/wiki/Digital_biquad_filter](https://en.wikipedia.org/wiki/Digital_biquad_filter) (direct form 2 is preferred). You will then have to format the coefficients of that filter using the [bilinear transform](https://en.wikipedia.org/wiki/Bilinear_transform) such that:


<pre><code>tf2s(b2,b1,b0,a1,a0,w1) = tf2(b0d,b1d,b2d,a1d,a2d)
with {
  c   = 1/tan(w1*0.5/SR);
  csq = c*c;
  d   = a0 + a1 * c + csq;
  b0d = (b0 + b1 * c + b2 * csq)/d;
  b1d = 2 * (b0 - b2 * csq)/d;
  b2d = (b0 - b1 * c + b2 * csq)/d;
  a1d = 2 * (a0 - csq)/d;
  a2d = (a0 - a1*c + csq)/d;
};
</code></pre>


where `tf2` is a direct form 2 biquad and SR the sampling rate.

Finally, you'll have to format the coefficients of the `tf2s` filter such that:


<pre><code>resonlp(fc,Q,gain) = tf2s(b2,b1,b0,a1,a0,wc)
with {
     wc = 2*PI*fc;
     a1 = 1/Q;
     a0 = 1;
     b2 = 0;
     b1 = 0;
     b0 = gain;
};
</code></pre>


(for the resonant lowpass)


<pre><code>resonbp(fc,Q,gain) = tf2s(b2,b1,b0,a1,a0,wc)
with {
     wc = 2*PI*fc;
     a1 = 1/Q;
     a0 = 1;
     b2 = 0;
     b1 = gain;
     b0 = 0;
};
</code></pre>


(for the resonant bandpass)


<pre><code>resonhp(fc,Q,gain,x) = gain*x-resonlp(fc,Q,gain,x);
</code></pre>


(for the resonant highpass).

Please, note that Q controls the bandwidth of the filter such that: `Q = fc/BW`.

Wrap this up by plugging a broadband signal generator (e.g., sawtooth oscillator or white noise generator) to the filter. Come up with some nice mapping controlled with hardware sensors (i.e., rotary pot, etc.).

### Project Idea 2: Hearing Aids

Basic hearing aids just implement a set of peak equalizing filters connected in sequence and taking the following form:


<pre><code>peak_eq(Lfx,fx,B) = tf2s(1,b1s,1,a1s,1,wx) with {
  T = 1.0/SR;
  Bw = B*T/sin(wx*T); // prewarp s-bandwidth for more accuracy in z-plane
  a1 = PI*Bw;
  b1 = g*a1;
  g = db2linear(abs(Lfx));
  if(Lfx&gt;0) {
    b1s = b1;
    a1s = a1;
  }
  else {
    b1s = a1;
    a1s = b1;
  }
  wx = 2*PI*fx;
};
</code></pre>


where the definition of `tf2s` (direct-form 2 biquadratic filter operating the bilinear transform) can be found in [Towards Resonant Filter](#towards-resonant-filters). `Lfx` controls the level of the filter in dB (0 for no filtering, negative value for band reduction, and positive value for band amplification). `fx` is the center frequency, `B` the bandwidth in Hz.

Make an hearing aids allowing us to control at least five bands.

### Project Idea 3: MIDI-Controlled Synthesizer

(This project idea is more targeted towards musicians.)

Implement a MIDI-controlled synthesizer based on the Teensy using the [Teensy USB MIDI Library](https://www.pjrc.com/teensy/td_midi.html). For that, you will need a midi keyboard (we can provide one if necessary). You'll also have to externally power your Teensy (we can help with that). Beyond implementing a cool-sounding synth, we encourage you to think about how polyphony could be implemented.

In the end, you wanna have a MIDI keyboard connected to your Teensy and sound coming out of it...

### Project Idea 4: Guitar Pedal Effect

If you know what you're doing, feel free to implement any guitar pedal effect that you like and that hasn't been studied in class on the Teensy (e.g., distortion, chorus, phaser, etc.).

### Project Idea 5: Sound Synthesis Module

If you know what you're doing, feel free to implement any sound synthesis algorithm that you like and that hasn't been studied in class on the Teensy (e.g., granular synthesis, physical modeling, vocoder, etc.).

### Project Idea 6: Cochlear Implant Simulation

Implement a [cochlear implant](https://en.wikipedia.org/wiki/Cochlear_implant) simulator on the Teensy using the description provided in [this paper](cochlear.pdf).
--></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="js/jquery-3.6.0.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script>
            var base_url = ".",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="js/base.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script src="search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>

<!--
MkDocs version : 1.5.2
Build Date UTC : 2023-08-28 09:46:54.083877+00:00
-->
