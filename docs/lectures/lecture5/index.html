<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title> 5: Sound Syntehsis Basics  - AUD @ INSA Lyon</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/docco.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">AUD @ INSA Lyon</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Syllabus</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Lectures <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../lecture1/" class="dropdown-item"> 1: Course Introduction and Programming Environment Setup </a>
</li>
                                    
<li>
    <a href="../lecture2/" class="dropdown-item"> 2: Audio Signal Processing Fundamentals </a>
</li>
                                    
<li>
    <a href="../lecture3/" class="dropdown-item"> 3: Digital Audio Systems Architectures and Audio Callback </a>
</li>
                                    
<li>
    <a href="../lecture4/" class="dropdown-item"> 4: Audio Codec Configuration </a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active"> 5: Sound Syntehsis Basics </a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../lecture4/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" class="nav-link disabled">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#lecture-5-sound-synthesis-basics" class="nav-link">Lecture 5: Sound Synthesis Basics</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#history-of-sound-synthesis" class="nav-link">History of Sound Synthesis</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#wave-shape-synthesis" class="nav-link">Wave Shape Synthesis</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#amplitude-modulation-am-synthesis" class="nav-link">Amplitude Modulation (AM) Synthesis</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#frequency-modulation-fm-synthesis" class="nav-link">Frequency Modulation (FM) Synthesis</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#physical-modeling-the-simple-case-of-the-karplus-strong" class="nav-link">Physical Modeling: the Simple Case of the Karplus Strong</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#white-noise" class="nav-link">White Noise</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#simple-filter-one-zero" class="nav-link">Simple Filter: One Zero</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#harmonic-distortion-rock-on" class="nav-link">Harmonic Distortion: Rock On!</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#echo" class="nav-link">Echo</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#comb" class="nav-link">Comb</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#flanger" class="nav-link">Flanger</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="lecture-5-sound-synthesis-basics">Lecture 5: Sound Synthesis Basics</h1>
<h2 id="history-of-sound-synthesis">History of Sound Synthesis</h2>
<p>TODO</p>
<p>Explain that what we're presenting here is not exhaustive.</p>
<h2 id="wave-shape-synthesis">Wave Shape Synthesis</h2>
<p>Wave Shape synthesis is one of the most basic sound synthesis technique. It consists of using oscillators producing waveforms of different shapes to generate sound. The most standard wave shapes are:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Square_wave#/media/File:Waveforms.svg">sine wave</a>,</li>
<li><a href="https://en.wikipedia.org/wiki/Square_wave#/media/File:Waveforms.svg">square wave</a>,</li>
<li><a href="https://en.wikipedia.org/wiki/Square_wave#/media/File:Waveforms.svg">triangle wave</a>,</li>
<li><a href="https://en.wikipedia.org/wiki/Square_wave#/media/File:Waveforms.svg">sawtooth wave</a>.</li>
</ul>
<p>The <a href="https://github.com/grame-cncm/embaudio20/tree/master/examples/sine-control"><code>sine-control</code></a> and <a href="https://github.com/grame-cncm/embaudio20/tree/master/examples/crazy-sine"><code>crazy-sine</code></a> examples can be considered as "wave shape synthesis" in that regard. </p>
<p>The <a href="https://github.com/grame-cncm/embaudio20/tree/master/examples/crazy-saw"><code>crazy-saw</code></a> example is very similar to <code>crazy-sine</code>, but it's based on a sawtooth wave instead. The sawtooth wave is created by using a <code>phasor</code> object. Just as a reminder, a phasor produces a signals tamping from 0 to 1 at a given frequency, it can therefore be seen as a sawtooth wave. Since the range of oscillators must be bounded between -1 and 1, we adjusts the output of the phasor such that:</p>
<pre><code>float currentSample = sawtooth.tick()*2 - 1;
</code></pre>

<p>Feel free to try the crazy-saw example at this point.</p>
<h2 id="amplitude-modulation-am-synthesis">Amplitude Modulation (AM) Synthesis</h2>
<p>Amplitude modulation synthesis consists of modulating the amplitude of a signal with another one. Sine waves are typically used for that:</p>
<figure>
<img src="img/am.png" class="mx-auto d-block" width="90%">
<figcaption><center>Amplitude Modulation (Source: <a href="https://en.wikipedia.org/wiki/Amplitude_modulation#/media/File:Illustration_of_Amplitude_Modulation.png">Wikipedia</a>)</center></figcaption>
</figure>

<p>When the frequency of the modulator is low (bellow 20Hz), our ear is able to distinguish each independent "beat", creating a tremolo effect. However, above 20Hz two side bands (if sine waves are used) start appearing following this rule:</p>
<figure>
<img src="img/am-spectrum.svg" class="mx-auto d-block" width="80%">
<figcaption><center>Amplitude Modulation Spectrum (Source: <a href="https://en.wikipedia.org/wiki/Amplitude_modulation#/media/File:AM_spectrum.svg">Wikipedia</a>)</center></figcaption>
</figure>

<p>The mathematical proof of this can be found on <a href="https://ccrma.stanford.edu/~jos/mdft/Sinusoidal_Amplitude_Modulation_AM.html">Julius Smith's website</a>.</p>
<p><a href="https://github.com/grame-cncm/embaudio20/tree/master/examples/lib"><code>Am.cpp</code></a> implements a sinusoidal amplitude modulation synthesizer:</p>
<pre><code>float Am::tick(){
  int cIndex = cPhasor.tick()*SINE_TABLE_SIZE;
  int mIndex = mPhasor.tick()*SINE_TABLE_SIZE;
  float posMod = sineTable.tick(mIndex)*0.5 + 0.5;
  return sineTable.tick(cIndex)*(1 - posMod*modIndex)*gain;
}
</code></pre>

<p>Note that phasors are used instead of "complete" sine wave oscillators to save the memory of an extra sine wave table. The range of the modulating oscillator is adjusted to be {0,1} instead of {-1,1}.</p>
<p>The amplitude parameter of the modulating oscillator is called the <em>index of modulation</em> and its frequency, the <em>frequency of modulation</em>.</p>
<p>In practice, the same result could be achieved using additive synthesis and three sine wave oscillators but AM allows us to save one oscillator. Also, AM is usually used an audio effect and modulation is applied to an input signal in that case instead of a sine wave. Sidebands will then be produced for each harmonic of the processed sound.</p>
<p>The <a href="https://github.com/grame-cncm/embaudio20/tree/master/examples/am"><code>am</code> example</a> demonstrates a use case of an AM synthesizer. Use the <code>Rec</code> and <code>Mode</code> button to cycle through the parameters of the synth and change their value.</p>
<h2 id="frequency-modulation-fm-synthesis">Frequency Modulation (FM) Synthesis</h2>
<p>Frequency modulation synthesis consists in modulating the frequency of an oscillator with another one:</p>
<figure>
<img src="img/fm.svg" class="mx-auto d-block" width="90%">
<figcaption><center>Frequency Modulation (Source: <a href="https://en.wikipedia.org/wiki/Frequency_modulation_synthesis">Wikipedia</a>)</center></figcaption>
</figure>

<p>which mathematically can be expressed as:</p>
<p>
<script type="math/tex; mode=display">x(t) = A_c\sin[\omega_ct + \phi_c + A_m\sin(\omega_mt + \phi_m)]</script>
</p>
<p>where <script type="math/tex">c</script> denotes the carrier and <script type="math/tex">m</script>, the modulator.</p>
<p>As for AM, the frequency of the modulating oscillator is called the <em>frequency of modulation</em> and the amplitude of the modulating oscillator, the <em>index of modulation</em>. Unlike AM, the value of the index of modulation can exceed 1 which will increase the number of sidebands. FM is not limited to two sidebands and can have an infinite number of sidebands depending on the value of the index. The mathematical rational behind this can be found on <a href="https://ccrma.stanford.edu/~jos/mdft/FM_Spectra.html">Julius Smith's website</a>.</p>
<p><a href="https://github.com/grame-cncm/embaudio20/blob/master/examples/lib/Fm.cpp"><code>fm.cpp</code></a> provides a simple example of how an FM synthesizer can be implemented:</p>
<pre><code>float Fm::tick(){
  int mIndex = mPhasor.tick()*SINE_TABLE_SIZE;
  float modulator = sineTable.tick(mIndex);
  cPhasor.setFrequency(cFreq + modulator*modIndex);
  int cIndex = cPhasor.tick()*SINE_TABLE_SIZE;
  return sineTable.tick(cIndex)*gain;
}
</code></pre>

<p>Note that as for the AM example, we're saving an extra sine wave table by using the same one for both oscillators.</p>
<p>The examples folder of the course repository hosts <a href="https://github.com/grame-cncm/embaudio20/tree/master/examples/fm">a simple LyraT program</a> illustrating the use of FM. Use the <code>Rec</code> and <code>Mode</code> button to cycle through the parameters of the synth and change their value.</p>
<p>FM synthesis was discovered in the late 1960s by John Chowning at Stanford University in California. He's now considered as one of the funding fathers of music technology and computer music. FM completely revolutionized the world of music in the 1980s by allowing Yamaha to produce the first commercial digital synthesizers: the <a href="https://en.wikipedia.org/wiki/Yamaha_DX7">DX7</a> which met a huge success. FM synthesis is the second most profitable patent that Stanford ever had.</p>
<h2 id="physical-modeling-the-simple-case-of-the-karplus-strong">Physical Modeling: the Simple Case of the Karplus Strong</h2>
<p>Physical modeling is one of the most advanced sound synthesis technique and a very active field of research. It consists of using physics/mathematical models of musical instruments or vibrating structures to synthesize sound. Various physical modeling techniques are used in the field of audio synthesis:</p>
<ul>
<li>Mass/Interaction (MI),</li>
<li>Finite Difference Scheme (FDS),</li>
<li>Signal models (e.g., waveguides, modal systems, etc.). </li>
</ul>
<p>While MI and FDS model the vibrational behavior of a system (i.e., using partial differential equation in the case of FDS), signal models model an object as a combination of signal processors. In this section, we will only look at this type of model the other ones being out of the scope of this class.</p>
<p>A extremely primitive string model can be implemented using a delay line and a loop. The delay line models the time it takes for vibration in the string to go from one extremity to the other, and the loop models the reflections at the boundaries of the string. In other words, we can literally just reuse <a href="TODO">the echo algorithm</a> for this. This primitive string model is called the "Karplus-Strong" algorithm:</p>
<figure>
<img src="img/karplus.svg" class="mx-auto d-block" width="60%">
<figcaption><center>Karplus-Strong Algorithm (Source: <a href="https://en.wikipedia.org/wiki/Karplus%E2%80%93Strong_string_synthesis#/media/File:Karplus-strong-schematic.svg">Wikipedia</a>)</center></figcaption>
</figure>

<p>The Karplus-Strong algorithm is typically implemented as:</p>
<p>
<script type="math/tex; mode=display">y(n) = x(n) + \alpha\frac{y(n-L) + y(n-L-1)}{2}</script>
</p>
<p>where:</p>
<ul>
<li>
<script type="math/tex">x(n)</script> is the input signal (typically an dirac or a noise burst),</li>
<li>
<script type="math/tex">\alpha</script> is the feedback coefficient (or dispersion coefficient, in that case),</li>
<li>
<script type="math/tex">L</script> is the length of the delay and hence, the length of the string.</li>
</ul>
<p>
<script type="math/tex">\frac{y(n-L) + y(n-L-1)}{2}</script> can be seen as a one zero filter implementing a lowpass. It models the fact that high frequencies are absorbed faster than low frequencies at the extremities of a string. </p>
<p>The length of the delay <script type="math/tex">L</script> can be controlled as a frequency using the following formula: <script type="math/tex">L = fs/f</script> where <script type="math/tex">f</script> is the desired frequency.</p>
<p>At the very least, the system must be excited by a dirac (i.e., a simple impulse going from 1 to 0). The quality of the generated sound can be significantly improved if a noise impulse is used though. </p>
<p><a href="https://github.com/grame-cncm/embaudio20/blob/master/examples/lib/KS.cpp"><code>KS.cpp</code></a> implements a basic Karplus-Strong algorithm:</p>
<pre><code>float KS::tick(){
  float excitation;
  if(trig){
    excitation = 1.0;
    trig = false;
  }
  else{
    excitation = 0.0;
  }
  float output = excitation + oneZero(delBuffer[readIndex])*feedback;
  delBuffer[writeIndex] = output;
  readIndex = (readIndex+1)%del;
  writeIndex = (writeIndex+1)%del;
  return output;
}
</code></pre>

<p>with:</p>
<pre><code>float KS::oneZero(float x){
  float output = (x + zeroDel)*0.5; 
  zeroDel = output;
  return output;
}
</code></pre>

<p>The examples folder of the course repository hosts <a href="https://github.com/grame-cncm/embaudio20/tree/master/examples/ks">a simple LyraT program</a> illustrating the use of <code>KS.cpp</code>.</p>
<p>Note that this algorithm could be improved in many ways. In particular, the fact that the delay length is currently expressed as an integer can result in frequency mismatches at high frequencies. In other words, our current string is out of tune. This could be fixed by using <a href="https://ccrma.stanford.edu/~jos/Interpolation/Welcome.html">fractional delay</a>.</p>
<p>In practice, the Karplus-Strong algorithm is not a physical model per se and is just a simplification of the <a href="https://ccrma.stanford.edu/~jos/pasp/Digital_Waveguide_Models.html">ideal string wave equation</a>. More advanced signal models can be implemented using waveguides.</p>
<p>Waveguide physical modeling has been extensively used in modern synthesizers to synthesize the sound of acoustic instruments. Julius O. Smith (Stanford professor) is the father of waveguide physical modeling. </p>
<h2 id="white-noise">White Noise</h2>
<p>White noise is a specific kind of signal in which there's an infinite number of harmonics all having the same level. In other words, the spectrum of white noise looks completely flat. </p>
<p>White noise is produced by generating random numbers between -1 and 1. <a href="https://github.com/grame-cncm/embaudio20/blob/master/examples/lib/Noise.cpp"><code>Noise.cpp</code></a> demonstrates how this can be done in C++ using the <code>rand()</code> function:</p>
<pre><code>Noise::Noise() :
randDiv(1.0/RAND_MAX){}

float Noise::tick(){
  return rand()*randDiv*2 - 1;
}
</code></pre>

<p>The <a href="#simple-filter-one-zero">Simple Filter: One Zero</a> section presents a use example of white noise.</p>
<h2 id="simple-filter-one-zero">Simple Filter: One Zero</h2>
<p>Filters are heavily used in the field of audio processing. In fact, designing filters is a whole field by itself. They are at the basis of many audio effects such as Wah guitar pedals, etc. From an algorithmic standpoint, the most basic filter is what we called a "one zero" filter which means that its transfer function only has numerators and no denominators. The differential equation of a one zero filter can be expressed as:</p>
<p>
<script type="math/tex; mode=display">y(n) = b_0x(n) + b_1x(n-1)</script>
</p>
<p>where <script type="math/tex">b_1</script> is "the zero" of the filter (also called <em>feed forward coefficient</em>), <script type="math/tex">b_0</script> can be discarded as it is equal to 1 in most cases.</p>
<p>One zero filters can either be used as a lowpass if the value of <script type="math/tex">b_1</script> is positive or as a highpass if <script type="math/tex">b_1</script> is negative. The frequency response of the filter which is be obtained with <script type="math/tex">H(e^{j \omega T}) = b_0 + b_1e^{-j \omega T}</script> can be visualized on <a href="https://ccrma.stanford.edu/~jos/filters/One_Zero.html">Julius Smith's website</a>.</p>
<p>Note that the gain of the signal is amplified on the second half of the spectrum which needs to be taken into account if this filter is used to process audio (once again, the output signal must be bounded within {-1,1}). </p>
<p><a href="https://github.com/grame-cncm/embaudio20/blob/master/examples/lib/OneZero.cpp"><code>OneZero.cpp</code></a> implements a one zero filter:</p>
<pre><code>float OneZero::tick(float input){
  float output = input + del*b1;
  del = input;
  return output*0.5;
}
</code></pre>

<p>Note that we multiply the output by 0.5 to normalize the output gain.</p>
<p>The <a href="https://github.com/grame-cncm/embaudio20/tree/master/examples/filtered-noise"><code>filtered-noise</code></a>) example program for the LyraT demonstrates the use of <code>OneZero.cpp</code> by feeding <a href="#white-noise">white noise</a> in it. The value of <script type="math/tex">b_1</script> can be changed by pressing the "Mode" button on the board, give it a try!</p>
<h2 id="harmonic-distortion-rock-on">Harmonic Distortion: Rock On!</h2>
<p>Distortion is one of the most common electric guitar effect. It consists of over driving a signal by increasing its gain to "square" the extremities of its waveform. This results in the creation of lots of harmonics, producing very "rich" sounds. Overdrive is easily achievable with an analog electronic circuit and "sharp edges" in the waveform are rounded thanks to the tolerance of the electronic components. In the digital world, things are slightly more complicated since clipping will happen resulting in a very dirty sound with potentially lots of aliasing. One way to solve this problem is to use a "cubic function" which will round the edges of the signal above a certain amplitude:</p>
<p>
<script type="math/tex; mode=display">
f(x) = 
\begin{cases}
\frac{-2}{3}, \; \; x \leq -1\\
x - \frac{x^3}{3}, \; \; -1 < x < 1\\
\frac{2}{3}, \; \; x \geq -1
\end{cases}
</script>
</p>
<p><a href="https://github.com/grame-cncm/embaudio20/blob/master/examples/lib/Distortion.cpp"><code>Distortion.cpp</code></a> implements a cubic distortion as:</p>
<pre><code>float Distortion::cubic(float x){
  return x - x*x*x/3;
}

float Distortion::tick(float input){
  float output = input*pow(10.0,2*drive) + offset;
  output = fmax(-1,fmin(1,output));
  output = cubic(output);
  return output*gain;
}
</code></pre>

<p>The range of <code>drive</code> is {0;1} which means that the value of <code>input</code> can be multiplied by a number as great as 100 here. <code>offset</code> is a common parameter which just adds a positive or negative DC offset to the signal. If this parameter is used, it is recommended to add a DC blocking filter after the distortion. </p>
<p>Distortion is created here by clipping the signal using the <code>fmin</code> and <code>fmax</code> functions. Finally, the cubic polynomial is used to round the edges of the waveform of the signal as explained above. </p>
<p>The <a href="https://github.com/grame-cncm/embaudio20/tree/master/examples/distortion"><code>distortion</code></a>) example program for the LyraT demonstrates the use of <code>Distortion.cpp</code>.</p>
<p>Distortion is a very trendy field of research in audio technology these days especially using "virtual analog" algorithms which consists of modeling the electronic circuit of distortion on a computer.</p>
<h2 id="echo">Echo</h2>
<p>An echo is a very common audio effect which is used a lot to add some density and depth to a sound. It is based on a feedback loop and a delay and can be expressed as:</p>
<p>
<script type="math/tex; mode=display">y(n) = x(n) + g.y(n - M)</script>
</p>
<p>where <script type="math/tex">g</script> is the feedback between 0 and 1 and <script type="math/tex">M</script> the delay as a number of samples.  </p>
<p>It can be seen as a simple physical model of what happens in the real world when echo is produced: the delay represents the time it takes for an acoustical wave to go from point A to point B at the speed of sound and <script type="math/tex">g</script> can control the amount of absorption created by the air and the reflecting material.</p>
<p><a href="https://github.com/grame-cncm/embaudio20/blob/master/examples/lib/Echo.cpp"><code>Echo.cpp</code></a> implements an echo as: </p>
<pre><code>float Echo::tick(float input){
  float output = input + delBuffer[readIndex]*feedback;
  delBuffer[writeIndex] = output;
  readIndex = (readIndex+1)%del;
  writeIndex = (writeIndex+1)%del;
  return output;
}
</code></pre>

<p>Here, <code>delBuffer</code> is used as a "ring buffer": incoming samples are stored and the read and write indices loop around to buffer to write incoming samples and read previous ones. Note that memory is allocated in the constructor of the class for <code>delBuffer</code> based on the value of <code>maxDel</code>, the maximum size of the delay.</p>
<p>The <a href="https://github.com/grame-cncm/embaudio20/tree/master/examples/echo"><code>echo</code></a>) example program for the LyraT demonstrates the use of <code>Echo.cpp</code>. </p>
<h2 id="comb">Comb</h2>
<p>A comb filter is a filter whose frequency response looks like a "comb". Comb filters can be implemented with feed-forward filters (Finite Impulse Response -- FIR) or feedback filters (Infinite Impulse Response -- IIR). In fact, the <a href="#echo">Echo</a> algorithm can be used as a comb filter if the delay is very short:</p>
<p>
<script type="math/tex; mode=display">y(n) = x(n)-gy(n-M)</script>
</p>
<p>where <script type="math/tex">M</script> is the length of the delay and <script type="math/tex">g</script> feedback coefficient. </p>
<p><a href="https://ccrma.stanford.edu/~jos/pasp/Feedback_Comb_Filter_Amplitude.html">Julius Smith's website</a> presents the frequency response of such filter and the mathematical rational behind it. </p>
<p>From an acoustical standpoint, a feedback comb filter will introduce resonances at specific point in the spectrum of the sound. The position and the spacing of these resonances is determined by the value of <script type="math/tex">M</script>. <script type="math/tex">g</script>, on the other hand, will determine the amplitude and sharpness of these resonances. </p>
<p>The <a href="https://github.com/grame-cncm/embaudio20/tree/master/examples/comb"><code>comb</code></a>) example program for the LyraT demonstrates the use of <code>Echo.cpp</code> as a comb filter. The "Mode" button can be used to change the value of the delay. </p>
<h2 id="flanger">Flanger</h2></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
